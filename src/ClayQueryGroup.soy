{namespace ClayQueryGroup}

/**
* Renders a query group that can contain multiple query rows.
*/
{template .render}
	{@param spritemap: string}
	{@param criteria: list<?>}
	{@param conjunctions: list<?>}
	{@param? conjunctionSelected: ?}
	{@param operators: list<?>}
	{@param query: ?}
	{@param? _handleConjunctionClick: any}

	<div class="sheet">
		{foreach $item in $query.items}
			{if not isFirst($item)}
				{call ClayButton.render}
					{param events: ['click': $_handleConjunctionClick] /}
					{param label: $conjunctionSelected.label /}
				{/call}
			{/if}

			{if isNonnull($item.items)}
				{call ClayQueryGroup.render}
					{param criteria: $criteria /}
					{param conjunctions: $conjunctions /}
					{param conjunctionSelected: $conjunctionSelected /}
					{param operators: $operators /}
					{param query: $item /}
					{param spritemap: $spritemap /}
					{param _handleConjunctionClick: $_handleConjunctionClick /}
				{/call}
			{else}
				{call ClayQueryRow.render}
					{param criteria: $criteria /}
					{param conjunctions: $conjunctions /}
					{param operators: $operators /}
					{param query: $item /}
					{param criteriaId: $item.criteriaId /}
					{param operatorId: $item.operatorId /}
					{param value: $item.value /}
					{param spritemap: $spritemap /}
				{/call}
			{/if}
		{/foreach}
	</div>
{/template}